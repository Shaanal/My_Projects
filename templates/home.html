<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CGPA Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase App -->
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js"></script>
    <!-- Firebase Auth -->
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-auth.js"></script>
    <!-- Firestore -->
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore.js"></script>
</head>
<body class="bg-gray-100 text-gray-800">
    <div class="max-w-4xl mx-auto p-6">
        <h1 class="text-3xl font-bold text-center mb-6">CGPA Calculator</h1>

        <!-- SGPA Calculator -->
        <div class="bg-white shadow-md rounded-lg p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4">Semester GPA (SGPA)</h2>
            <form id="sgpaForm" class="space-y-4">
                <div id="subjectsContainer"></div>
                <button type="button" onclick="addSubject()" class="bg-blue-500 text-white px-4 py-2 rounded">Add Subject</button>
                <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded">Calculate SGPA</button>
            </form>
            <p class="mt-4 font-semibold">SGPA: <span id="sgpaResult">-</span></p>
        </div>

        <!-- CGPA Calculator -->
        <div class="bg-white shadow-md rounded-lg p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4">Cumulative GPA (CGPA)</h2>
            <form id="cgpaForm" class="space-y-4">
                <input type="number" step="0.01" id="prevCredits" placeholder="Previous Total Credits" class="w-full px-4 py-2 border rounded">
                <input type="number" step="0.01" id="prevCGPA" placeholder="Previous CGPA" class="w-full px-4 py-2 border rounded">
                <input type="number" step="0.01" id="currCredits" placeholder="Current Semester Credits" class="w-full px-4 py-2 border rounded">
                <input type="number" step="0.01" id="currSGPA" placeholder="Current Semester SGPA" class="w-full px-4 py-2 border rounded">
                <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded">Calculate CGPA</button>
            </form>
            <p class="mt-4 font-semibold">CGPA: <span id="cgpaResult">-</span></p>
        </div>

        <!-- Needed SGPA Calculator -->
        <div class="bg-white shadow-md rounded-lg p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4"> Required SGPA to Reach Target CGPA</h2>
            <form id="requiredSGPAForm" class="space-y-4">
                <input type="number" step="1" id="sprevTotalCredits" placeholder="Previous Total Credits" class="w-full px-4 py-2 border rounded">
                <input type="number" step="0.01" id="sprevCGPA" placeholder="Previous CGPA" class="w-full px-4 py-2 border rounded">
                <input type="number" step="1" id="scurrCredits" placeholder="Current Semester Credits" class="w-full px-4 py-2 border rounded">
                <input type="number" step="0.5" id="stargetCGPA" placeholder="Target CGPA" class="w-full px-4 py-2 border rounded">
                <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded">Calculate Required SGPA</button>
            </form>
            <p class="mt-4 font-semibold">Required SGPA: <span id="requiredSGPAResult">-</span></p>
        </div> 


        <!-- Grade Estimator -->
        <div class="bg-white shadow-md rounded-lg p-6">
            <h2 class="text-xl font-semibold mb-4">Course Grade Estimator</h2>
            <form id="gradeForm" class="space-y-4">
                <div class="grid grid-cols-3 gap-4">
                <input type="number" step="0.5" id="quiz1" placeholder="Quiz 1 Score" class="px-4 py-2 border rounded">
                <input type="number" id="total1" placeholder="Quiz 1 Total" class="px-4 py-2 border rounded">
                <input type="number" id="weight1" placeholder="Quiz 1 Weight (%)" class="px-4 py-2 border rounded">

                <input type="number" step="0.5" id="quiz2" placeholder="Quiz 2 Score" class="px-4 py-2 border rounded">
                <input type="number" id="total2" placeholder="Quiz 2 Total" class="px-4 py-2 border rounded">
                <input type="number" id="weight2" placeholder="Quiz 2 Weight (%)" class="px-4 py-2 border rounded">

                <input type="number" step="0.5" id="midsem" placeholder="Mid Sem Score" class="px-4 py-2 border rounded">
                <input type="number" id="total3" placeholder="Mid Sem Total" class="px-4 py-2 border rounded">
                <input type="number" id="weight3" placeholder="Mid Sem Weight (%)" class="px-4 py-2 border rounded">

                <input type="number" step="0.5" id="endsem" placeholder="End Sem Score" class="px-4 py-2 border rounded">
                <input type="number" id="total4" placeholder="End Sem Total" class="px-4 py-2 border rounded">
                <input type="number" id="weight4" placeholder="End Sem Weight (%)" class="px-4 py-2 border rounded">

                <input type="number" step="0.5" id="project" placeholder="Project Score" class="px-4 py-2 border rounded">
                <input type="number" id="total5" placeholder="Project Total" class="px-4 py-2 border rounded">
                <input type="number" id="weight5" placeholder="Project Weight (%)" class="px-4 py-2 border rounded">
                
                <input type="number" step="0.5" id="assignments" placeholder="Assignments Score" class="px-4 py-2 border rounded">
                <input type="number" id="total6" placeholder="Assignments Total" class="px-4 py-2 border rounded">
                <input type="number" id="weight5" placeholder="Assignments Weight (%)" class="px-4 py-2 border rounded">
                </div>
                <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded">Calculate Grade</button>
            </form>
            <p class="mt-4 font-semibold">Course Total: <span id="courseResult">-</span></p>
            </div>
    </div>

    <script>
        function addSubject() {
            const container = document.getElementById('subjectsContainer');
            const div = document.createElement('div');
            div.className = 'grid grid-cols-2 gap-4';
            div.innerHTML = `
                <input type="text" placeholder="Grade (e.g. A, B+, etc)" class="px-4 py-2 border rounded grade">
                <input type="number" placeholder="Credits" class="px-4 py-2 border rounded credit">
            `;
            container.appendChild(div);
        }

        document.getElementById('sgpaForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const grades = document.querySelectorAll('.grade');
            const credits = document.querySelectorAll('.credit');
            const gradeMap = {"A":10,"A-":9,"B":8,"B-":7,"C":6,"C-":5,"D":4,"F":0};
            let totalPoints = 0, totalCredits = 0;
            for (let i = 0; i < grades.length; i++) {
                let gp = gradeMap[grades[i].value.toUpperCase()] || 0;
                let cr = parseFloat(credits[i].value) || 0;
                totalPoints += gp * cr;
                totalCredits += cr;
            }
            let sgpa = (totalPoints / totalCredits).toFixed(2);
            document.getElementById('sgpaResult').innerText = sgpa;
        });

        document.getElementById('cgpaForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const prevCred = parseFloat(document.getElementById('prevCredits').value);
            const prevCg = parseFloat(document.getElementById('prevCGPA').value);
            const currCred = parseFloat(document.getElementById('currCredits').value);
            const currSg = parseFloat(document.getElementById('currSGPA').value);
            const totalCred = prevCred + currCred;
            const weightedSum = (prevCred * prevCg) + (currCred * currSg);
            const cgpa = (weightedSum / totalCred).toFixed(2);
            document.getElementById('cgpaResult').innerText = cgpa;
        });

        document.getElementById('requiredSGPAForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const prevTotalCredits = parseFloat(document.getElementById('sprevTotalCredits').value);
            const prevCGPA = parseFloat(document.getElementById('sprevCGPA').value);
            const currCredits = parseFloat(document.getElementById('scurrCredits').value);
            const targetCGPA = parseFloat(document.getElementById('stargetCGPA').value);

            const totalCredits = prevTotalCredits + currCredits;
            const neededSGPA = ((targetCGPA * totalCredits) - (prevCGPA * prevTotalCredits)) / currCredits;
            let resultText = neededSGPA.toFixed(2);

            document.getElementById('requiredSGPAResult').innerText = resultText;
        });

        document.getElementById('gradeForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const comp = ["quiz1", "quiz2", "midsem", "endsem", "project", "assignments"];
            let total = 0;

            for (let i = 0; i < comp.length; i++) {
                const id = comp[i];
                const score = parseFloat(document.getElementById(id)?.value) || 0;
                const marks = parseFloat(document.getElementById('total' + (i + 1))?.value) || 0;
                const weight = parseFloat(document.getElementById('weight' + (i + 1))?.value) || 0;

                if (marks === 0) continue; // Avoid divide by zero

                const calc_score = (score / marks) * 100;
                total += (calc_score * weight) / 100;
            }
            document.getElementById('courseResult').innerText = isNaN(total) ? "-" : total.toFixed(2);
        });
    
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT.appspot.com",
            messagingSenderId: "XXXX",
            appId: "XXXX"
        };
        firebase.initializeApp(firebaseConfig);
    </script>

</body>
</html>
